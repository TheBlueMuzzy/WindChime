---
phase: 02-qr-scanner
plan: 01
type: execute
---

<objective>
Replace the camera placeholder with a live @yudiel/react-qr-scanner component configured for rear-facing camera.

Purpose: Get the phone camera streaming into the app — the first step toward QR detection.
Output: Full-screen live camera feed from rear camera, no placeholder visible.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-project-foundation/01-02-SUMMARY.md

# Key files from Phase 1:
@src/App.tsx
@src/styles.css
@src/main.tsx

**Tech stack available:** vite@7.3.1, react@19, typescript, @yudiel/react-qr-scanner@2.5.1, barcode-detector@3.0.8
**Established patterns:** inline styles for simple layout, dvh/dvw viewport units, global reset in styles.css
**Constraining decisions:**
- Phase 1: Camera placeholder div is the integration point — replace inner div
- Phase 1: Inline styles for app shell layout
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create QrScanner wrapper component</name>
  <files>src/components/QrScanner.tsx</files>
  <action>Create a new component that wraps @yudiel/react-qr-scanner's Scanner component.

Import Scanner from '@yudiel/react-qr-scanner'. Configure it with:
- `formats`: ['qr_code'] (only detect QR codes, ignore other barcode types)
- `constraints`: { facingMode: 'environment' } (rear camera)
- `scanDelay`: 500 (default throttle between scan callbacks)
- `onScan`: Accept as a prop — callback receiving IDetectedBarcode[] from the library
- `onError`: Accept as a prop — callback for camera/scan errors
- `styles`: { container: { width: '100%', height: '100%' }, video: { objectFit: 'cover' } } so the video fills its parent container

The component should accept props for onScan and onError callbacks and pass them through to Scanner. Keep it simple — just a configured Scanner wrapper.

Do NOT add sound (sound={false}) — we handle audio ourselves in Phase 3.
Do NOT add components.finder or other UI overlays — Phase 9 handles visual feedback.</action>
  <verify>File exists at src/components/QrScanner.tsx, TypeScript compiles: npx tsc --noEmit</verify>
  <done>QrScanner.tsx exports a component wrapping Scanner with rear camera config, qr_code format filter, and onScan/onError prop pass-through</done>
</task>

<task type="auto">
  <name>Task 2: Replace camera placeholder with QrScanner</name>
  <files>src/App.tsx</files>
  <action>Replace the camera placeholder div (the inner div with dashed border and "Camera will appear here" text) with the QrScanner component.

Import QrScanner from './components/QrScanner'.

For now, wire onScan to console.log the detected codes array (temporary — Phase 02-03 adds real display). Wire onError to console.error.

Keep the fullScreenContainer wrapper div with its existing styles. The QrScanner should fill the space where the placeholder was. Give its parent a style that constrains it: width: '80%', height: '60%', borderRadius: '8px', overflow: 'hidden' (same dimensions as the old placeholder, but now showing live camera).

Remove the placeholder text span and dashed border styles entirely — they're replaced by the live feed.</action>
  <verify>npx tsc --noEmit passes. Run dev server (npm run dev) and open on phone — camera should activate and show live feed.</verify>
  <done>App.tsx renders QrScanner instead of placeholder. Camera feed visible in the 80%x60% container. Console logs detected codes. No TypeScript errors.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Live camera feed from rear camera replacing the placeholder div</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open on phone (same network) or use browser with camera
    3. Confirm: Camera permission prompt appears
    4. Grant permission
    5. Confirm: Live rear camera feed visible in the dark container
    6. Confirm: No console errors (open DevTools)
    7. Point at a QR code — check console for detected code logs
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes
- [ ] `npm run build` succeeds
- [ ] Camera activates on dev server
- [ ] QR codes detected in console.log output
</verification>

<success_criteria>

- QrScanner component created and configured
- Camera placeholder replaced with live feed
- Rear camera activated by default
- Detected QR codes logged to console
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-qr-scanner/02-01-SUMMARY.md`
</output>
