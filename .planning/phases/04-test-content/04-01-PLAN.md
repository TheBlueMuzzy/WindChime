---
phase: 04-test-content
plan: 01
type: execute
status: SUPERSEDED
---

> **SUPERSEDED**: This plan was executed but the approach changed significantly.
> User provided 24 real wind chime recordings instead of 3 synthesized tones.
> SOUND_MAP and src/config/sounds.ts were deleted. QR rawValues (Chime_01–Chime_24)
> map directly to /sounds/Chime_XX.mp3. See 04-01-SUMMARY.md for actual outcome.

<objective>
Create 3 distinct wind chime sounds that are short, constructive when layered, and sound pleasant in any combination.

Purpose: Replace the 440Hz test tone with real wind chime-like sounds so the app can be tested with actual audio content. These sounds must work well together — any 1, 2, or 3 playing simultaneously should sound harmonious.
Output: 3 WAV files in public/sounds/ (chime-1.wav, chime-2.wav, chime-3.wav), each <5s, tuned to complementary frequencies.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context (dependency graph):
@.planning/phases/03-audio-engine/03-02-SUMMARY.md
@.planning/phases/03-audio-engine/03-03-SUMMARY.md

# Key source files:
@src/hooks/useAudioEngine.ts
@src/config/sounds.ts
@scripts/generate-test-tone.mjs

**Tech stack available:** Web Audio API, Node.js for scripting
**Established patterns:** WAV generation via Node.js script (generate-test-tone.mjs), config-driven sound mapping (SOUND_MAP)
**Constraining decisions:**
- SOUND_MAP expects keys: chime-1, chime-2, chime-3
- SOUND_MAP currently maps chime-2 and chime-3 to .mp3 — update to .wav for consistency
- Sounds pre-loaded on mount — must be small files for fast startup
- Sounds bundled with app (public/sounds/ directory)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create wind chime sound generator script</name>
  <files>scripts/generate-chimes.mjs</files>
  <action>Create a Node.js script that generates 3 wind chime WAV files using additive synthesis. Each chime should:

1. Use a fundamental frequency + harmonics to simulate metallic chime timbre:
   - chime-1: C5 (523 Hz) — bright, clear
   - chime-2: E5 (659 Hz) — warm, complementary (major third above C5)
   - chime-3: G5 (784 Hz) — open, airy (perfect fifth above C5)
   These form a C major triad — any combination sounds consonant.

2. Each sound: ~2-3 seconds total, with:
   - Fast attack (~20ms ramp from 0 to peak)
   - Slow exponential decay (amplitude * e^(-t * decayRate))
   - 3-4 harmonics per tone at decreasing amplitudes (fundamental 1.0, 2nd harmonic 0.4, 3rd 0.2, 4th 0.1)
   - Slight inharmonicity (multiply harmonic frequencies by 1.0, 2.01, 3.03, 4.06) to sound metallic rather than synthetic

3. Output format: 16-bit PCM WAV, 44100Hz, mono
4. Write to public/sounds/chime-1.wav, public/sounds/chime-2.wav, public/sounds/chime-3.wav

Base the WAV writing code on the existing generate-test-tone.mjs pattern (same RIFF header format). Do NOT use external audio libraries — pure Node.js Buffer manipulation.
  </action>
  <verify>node scripts/generate-chimes.mjs runs without error, produces 3 .wav files in public/sounds/, each file is >1KB</verify>
  <done>3 WAV files exist: chime-1.wav, chime-2.wav, chime-3.wav — each 2-3s, distinct pitch, metallic chime timbre</done>
</task>

<task type="auto">
  <name>Task 2: Update SOUND_MAP and verify audio loading</name>
  <files>src/config/sounds.ts</files>
  <action>Update SOUND_MAP to use .wav extension for all 3 entries (chime-2 and chime-3 currently reference .mp3):

```
export const SOUND_MAP: Record<string, string> = {
  'chime-1': '/sounds/chime-1.wav',
  'chime-2': '/sounds/chime-2.wav',
  'chime-3': '/sounds/chime-3.wav',
}
```

Then verify the build still works — `npm run build` should succeed with no errors.
  </action>
  <verify>npm run build succeeds. All 3 .wav files exist in public/sounds/. SOUND_MAP references match actual file extensions.</verify>
  <done>SOUND_MAP correctly maps all 3 chime IDs to .wav files, build passes, no TypeScript errors</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>3 synthesized wind chime sounds (C major triad: C5, E5, G5) with metallic timbre and natural decay envelopes</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open app on phone, tap to enable sound
    3. Point camera at QR code for chime-1 — should hear a clear metallic chime tone (C5)
    4. Test chime-2 and chime-3 with their QR codes (if available from Phase 3 test assets) — should hear distinct but complementary pitches
    5. If only chime-1 QR code exists, verify chime-1 sounds like a wind chime (not a flat sine wave)
    6. Alternatively: open browser console on desktop and manually test:
       - Navigate to the app URL
       - In console: `new Audio('/sounds/chime-1.wav').play()`
       - Repeat for chime-2.wav and chime-3.wav
    7. Confirm: each sound is distinct, short (2-3s), and sounds pleasant/metallic
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues (too quiet, too harsh, wrong pitch, etc.)</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] 3 WAV files exist in public/sounds/ (chime-1.wav, chime-2.wav, chime-3.wav)
- [ ] Each file is valid WAV (>1KB, plays in browser)
- [ ] SOUND_MAP references all 3 with correct .wav paths
- [ ] `npm run build` succeeds
- [ ] Human verified sounds are acceptable quality
</verification>

<success_criteria>

- 3 distinct wind chime sounds generated
- Sounds are constructive when layered (C major triad)
- All files load successfully in the app
- Build passes with no errors
- Human approved sound quality
</success_criteria>

<output>
After completion, create `.planning/phases/04-test-content/04-01-SUMMARY.md`
</output>
